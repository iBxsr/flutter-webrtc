name: 自动全量同步源仓库

on:
  schedule:
    - cron: '0 0 * * *'    # 每天北京时间早上 8 点自动运行一次 (UTC 0点)
  workflow_dispatch:        # 允许你在 Actions 页面手动点击按钮立即同步

jobs:
  repo-sync:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v4
        with:
          fetch-depth: 0    # 获取完整历史，确保分支同步完整

      - name: 同步所有分支和标签
        uses: repo-sync/github-sync@v2
        with:
          source_repo: "https://github.com/flutter-webrtc/flutter-webrtc.git" # 替换为源仓库地址
          source_branch: "*"      # 同步所有分支
          destination_branch: "*" # 同步到你自己的对应分支
          github_token: ${{ secrets.GITHUB_TOKEN }}
